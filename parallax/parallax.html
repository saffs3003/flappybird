<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        /* width: 200px;
        height: 200px; */
        border: 1px solid black;
      }

      body {
        display: flex;
        justify-content: center;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas"> </canvas>
    <script>
      let gamespeed = 15;
      let x = 0;
      let y = 0;
      let x2 = 800;
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      let width = (canvas.width = 800);
      let height = (canvas.height = 600);

      const background1 = new Image();
      background1.src = "../Clouds/1.png";

      const background2 = new Image();
      background2.src = "../Clouds/2.png";

      const background3 = new Image();
      background3.src = "../city/3.png";

      const background4 = new Image();
      background4.src = "../city/4.png";

      const background5 = new Image();
      background5.src = "../city/5.png";
      const background6 = new Image();
      background6.src = "../city/6.png";

      class Layer {
        constructor(
          image,
          speedModifier,
          customHeight = height,
          customY = 0,
          opacity = 1.0
        ) {
          this.x = x;
          this.y = customY;
          this.width = width;
          this.height = customHeight;
          this.x2 = x2;
          this.image = image;
          this.speedModifier = speedModifier;
          this.opacity = opacity;
          this.speed = gamespeed;
        }

        update() {
          this.speed = gamespeed * this.speedModifier;
          if (this.x <= -this.width) {
            this.x = this.width + this.x2 - this.speed;
          }

          if (this.x2 <= -this.width) {
            this.x2 = this.width + this.x - this.speed;
          }

          this.x = Math.floor(this.x - this.speed);
          this.x2 = Math.floor(this.x2 - this.speed);
        }

        draw() {
          ctx.globalAlpha = this.opacity;
          ctx.drawImage(this.image, this.x, this.y, this.width, this.height);
          ctx.drawImage(this.image, this.x2, this.y, this.width, this.height);
          ctx.imageSmoothingEnabled = false;
        }
      }

      const layer1 = new Layer(background1, 0.2);
      const layer2 = new Layer(background2, 0.23);
      const layer3 = new Layer(background3, 0.235, 600, height - 600, 0.55);
      const layer4 = new Layer(background4, 0.18, 550, height - 550, 0.7);
      const layer5 = new Layer(background5, 0.19, 450, height - 450, 0.8);

      const layer6 = new Layer(background6, 0.15, 400, height - 400, 0.9);

      let backgroundObjext = [layer1, layer2, layer3, layer4, layer5, layer6];
      function animate() {
        ctx.clearRect(0, 0, width, height);
        backgroundObjext.forEach((object) => {
          object.update();
          object.draw();
        });
        requestAnimationFrame(animate);
      }
      animate();
    </script>
    <!-- <script src="parallax.js"></script> -->
  </body>
</html>
